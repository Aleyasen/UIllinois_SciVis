<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="1020" height="800"></canvas>
    <script>

      function generate_points(xmax, ymax,n){
          pts=[];
          center = [xmax/2,ymax/2]
          for(i=0;i<n;i++){
              t=(Math.random()-0.5)*(xmax/3)+center[0];
              x=(Math.random()-0.5)*(xmax/8) +t;
              y=(Math.random()-0.5)*(ymax/8) +t;

              pts.push([x,y]);
          }
        return pts;
      }

      function draw_points(pts){
          for(i=0;i<pts.length;i++){

              context.beginPath();
              context.arc(pts[i][0],pts[i][1], 2, 0, 2 * Math.PI, false);
              // apply styling
              context.fillStyle = '#FF0000';
              context.fill();
              context.lineWidth = 1;
              context.strokeStyle = 'black';
              context.stroke();
          }
        return;
      }

      function find_eigen2(m){
        return;
          }



      function find_average(pts){
          c=[0,0];
          for(i=0;i<pts.length;i++){
          c[0]+=pts[i][0];
          c[1]+=pts[i][1];
          }
          c[0]/=pts.length;
          c[1]/=pts.length;
        return c;
      }


      function find_covariance_mat(pts,c){
        cv_mat=[[0,0],[0,0]];

        return cv_mat;
      }



      function draw_vectors(center,v1,v2,ctx){

          context.beginPath();
          ctx.moveTo(center[0], center[1]);
      	  ctx.lineTo(center[0]+v1[0], center[1]+v1[1]);
      	  ctx.lineWidth = 1;
      	  // set line color
      	  ctx.strokeStyle = '#000000';
      	  ctx.stroke();

          context.beginPath();
          ctx.moveTo(center[0], center[1]);
      	  ctx.lineTo(center[0]+v2[0], center[1]+v2[1]);
      	  ctx.lineWidth = 1;
      	  // set line color
      	  ctx.strokeStyle = '#000000';
      	  ctx.stroke();


        return;
      }

      var canvas = document.getElementById('myCanvas');
      var context = canvas.getContext('2d');

      var pts= generate_points(canvas.width,canvas.height,200);
      draw_points(pts);
      var c= find_average(pts);
      var cv_mat=find_covariance_mat(pts,c);
      eig = find_eigen2(cv_mat);
      draw_vectors(c,eig[1],eig[3],context);
    </script>
  </body>
</html>